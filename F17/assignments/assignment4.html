
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Assignment 4 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-asciidoc-admonition-icons/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="assignment5.html" />
    
    
    <link rel="prev" href="assignment3.html" />
    

<link href="https://fonts.googleapis.com/css?family=Lato|Merriweather" rel="stylesheet">

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../syllabus/">
            
                <a href="../syllabus/">
            
                    
                    Syllabus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../syllabus/outcomes.html">
            
                <a href="../syllabus/outcomes.html">
            
                    
                    Goals and Outcomes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../syllabus/logistics.html">
            
                <a href="../syllabus/logistics.html">
            
                    
                    Course Logistics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../syllabus/resources.html">
            
                <a href="../syllabus/resources.html">
            
                    
                    Textbook and Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../syllabus/assessment.html">
            
                <a href="../syllabus/assessment.html">
            
                    
                    Assessment Plan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../syllabus/policies.html">
            
                <a href="../syllabus/policies.html">
            
                    
                    Course Policies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../syllabus/schedule.html">
            
                <a href="../syllabus/schedule.html">
            
                    
                    Schedule
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../resources/">
            
                <a href="../resources/">
            
                    
                    Software and Resources
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../resources/documentation.html">
            
                <a href="../resources/documentation.html">
            
                    
                    Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../resources/software.html">
            
                <a href="../resources/software.html">
            
                    
                    Software and Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../resources/onyx.html">
            
                <a href="../resources/onyx.html">
            
                    
                    Using Onyx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../resources/git.html">
            
                <a href="../resources/git.html">
            
                    
                    Git for Data Science
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../resources/good-notebooks.html">
            
                <a href="../resources/good-notebooks.html">
            
                    
                    Writing Good Notebooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../classes/">
            
                <a href="../classes/">
            
                    
                    Class Information
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../classes/week1.html">
            
                <a href="../classes/week1.html">
            
                    
                    Week 1 (Aug. 21–25)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../classes/week2.html">
            
                <a href="../classes/week2.html">
            
                    
                    Week 2 (Aug. 28–Sep. 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../classes/week3.html">
            
                <a href="../classes/week3.html">
            
                    
                    Week 3 (Sep. 4–8)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../classes/week4.html">
            
                <a href="../classes/week4.html">
            
                    
                    Week 4 (Sep. 11-15)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../classes/week5.html">
            
                <a href="../classes/week5.html">
            
                    
                    Week 5 (Sep. 18–22)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../classes/week6.html">
            
                <a href="../classes/week6.html">
            
                    
                    Week 6 (Sep. 25–29)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../classes/week7.html">
            
                <a href="../classes/week7.html">
            
                    
                    Week 7 (Oct. 2–6)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../classes/week9.html">
            
                <a href="../classes/week9.html">
            
                    
                    Week 9 (Oct. 16–20)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../classes/week11.html">
            
                <a href="../classes/week11.html">
            
                    
                    Week 11 (Oct. 30–Nov. 3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../classes/week12.html">
            
                <a href="../classes/week12.html">
            
                    
                    Week 12 (Nov. 6–10)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Assignments
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="assignment1.html">
            
                <a href="assignment1.html">
            
                    
                    Assignment 1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="assignment2.html">
            
                <a href="assignment2.html">
            
                    
                    Assignment 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="assignment3.html">
            
                <a href="assignment3.html">
            
                    
                    Assignment 3
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.4" data-path="assignment4.html">
            
                <a href="assignment4.html">
            
                    
                    Assignment 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="assignment5.html">
            
                <a href="assignment5.html">
            
                    
                    Assignment 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="assignment67.html">
            
                <a href="assignment67.html">
            
                    
                    Assignments 6&7
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../notebooks/README.md">
            
                <span>
            
                    
                    Notebooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <a target="_blank" href="ref://notebooks/DiscreteProbIntro.html">
            
                    
                    Discrete Probability Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" >
            
                <a target="_blank" href="ref://notebooks/ContinuousProbIntro.html">
            
                    
                    Continuous Probability Intro
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../failure.html">
            
                <a href="../failure.html">
            
                    
                    On Failure
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Assignment 4</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="assignment-4">Assignment 4</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Due on Nov. 1, 2017 at 11:59 PM.</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_revisions">Revisions</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Oct. 30, 2017</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Corrected FPR and FNR definitions (Wikipedia is correct)</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_readings">Readings</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.propublica.org/article/machine-bias-risk-assessments-in-criminal-sentencing/" target="_blank">ProPublica article</a></p>
</li>
<li>
<p><a href="https://www.propublica.org/article/how-we-analyzed-the-compas-recidivism-algorithm" target="_blank">ProPublica technical description</a></p>
</li>
<li>
<p><a href="https://www.documentcloud.org/documents/2998391-ProPublica-Commentary-Final-070616.html" target="_blank">Northpointe Rebuttal</a></p>
</li>
<li>
<p><a href="https://www.propublica.org/article/technical-response-to-northpointe" target="_blank">ProPublica Response</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download the <code>compas-scores-two-years.csv</code> file from the <a href="https://github.com/propublica/compas-analysis/" target="_blank">ProPublica analysis data</a>.  This contains the raw data you need.</p>
</div>
<div class="paragraph">
<p>Some of the particularly interesting variables:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sex</dt>
<dd>
<p>The defendant&#x2019;s sex</p>
</dd>
<dt class="hdlist1">race</dt>
<dd>
<p>The defendant&#x2019;s race</p>
</dd>
<dt class="hdlist1">decile_score</dt>
<dd>
<p>The defendant&#x2019;s COMPAS decile score for recidivism.</p>
</dd>
<dt class="hdlist1">score_text</dt>
<dd>
<p>The defendant&#x2019;s COMPAS risk score (low/medium/high) for recidivism.</p>
</dd>
<dt class="hdlist1">v_decile_score</dt>
<dd>
<p>The defendant&#x2019;s COMPAS decile score for violent recidivism.</p>
</dd>
<dt class="hdlist1">v_score_text</dt>
<dd>
<p>The defendant&#x2019;s COMPAS risk score for violent recidivism.</p>
</dd>
<dt class="hdlist1">is_recid</dt>
<dd>
<p>Whether the defendant recidiviated.</p>
</dd>
<dt class="hdlist1">is_violent_recid</dt>
<dd>
<p>Whether the defendent committed a violent crime after being released.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_filtering_data">Filtering data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ProPublica documents a number of filtering steps to perform before using the data.  From <a href="https://github.com/propublica/compas-analysis/blob/master/Compas%20Analysis.ipynb" target="_blank">their notebook</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>There are a number of reasons remove rows because of missing data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the charge date of a defendants Compas scored crime was not within 30 days from when the person was arrested, we assume that because of data quality reasons, that we do not have the right offense.</p>
</li>
<li>
<p>We coded the recidivist flag&#x2009;&#x2014;&#x2009;is_recid&#x2009;&#x2014;&#x2009;to be -1 if we could not find a compas case at all.</p>
</li>
<li>
<p>In a similar vein, ordinary traffic offenses&#x2009;&#x2014;&#x2009;those with a c_charge_degree of &apos;O&apos;&#x2009;&#x2014;&#x2009;will not result in Jail time are removed (only two of them).</p>
</li>
<li>
<p>We filtered the underlying data from Broward county to include only those rows representing people who had either recidivated in two years, or had at least two years outside of a correctional facility.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-r" data-lang="r">df = dplyr::select(raw_data, age, c_charge_degree, race, age_cat, score_text, sex, priors_count,
                    days_b_screening_arrest, decile_score, is_recid, two_year_recid, c_jail_in, c_jail_out) %&gt;%
        filter(days_b_screening_arrest &lt;= <span class="hljs-number">30</span>) %&gt;%
        filter(days_b_screening_arrest &gt;= -<span class="hljs-number">30</span>) %&gt;%
        filter(is_recid != -<span class="hljs-number">1</span>) %&gt;%
        filter(c_charge_degree != <span class="hljs-string">&quot;O&quot;</span>) %&gt;%
        filter(score_text != <span class="hljs-string">&apos;N/A&apos;</span>)</code></pre>
</div>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your task is to analyze the accuracy of the classifier with respect to actual post-release recidivism.  How good is at predicting recidivism? How accurate is it at predicting violent recidivism?</p>
</div>
<div class="paragraph">
<p>Start by doing some basic analysis of the accuracy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Plot ROC curves for recidivism and violent recidivism, using the decile scores as the predictor.</p>
</li>
<li>
<p>Compute the precision (PPV), recall, false positive rate, and false negative rate for predicting both recidivism and violent recidivism, using &apos;High Risk&apos; as the threshold for &apos;will recidivate&apos;.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now we want to look at racial disparities; we will consider Caucasian, Black, and Hispanic.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Draw a bar chart that shows, for each race, and separately for violent and non-violent scoring, the likelihood that a defendant with each of the three risk score levels recidivates.  The X axis should be risk score, and the Y axis should be likelihood of recidivism; <code>facet_grid</code> by race and whether we are looking at violent or general recidivism.</p>
</li>
<li>
<p>Compute the False Positive Rate for each race: what fraction of defendants who do not recidivate receive a high risk score?</p>
</li>
<li>
<p>Compute the False Negative Rate for each race: what fraction of defendants who receive do recidivate receive a low risk score?</p>
</li>
<li>
<p>Compute the Positive Predictive Value (or Precision) for each race.</p>
</li>
<li>
<p>Compute the Negative Predictive Value for each race (what fraction of low-risk defendents do recidiviate).</p>
</li>
<li>
<p>Plot ROC curves for each race (overlayed on top of each other &#x2014; map the <code>color</code> and <code>linetype</code> aesthetics to race).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally, write:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Based on these analyses, write 1-2 paragraphs about how members of different races experience the prediction system.</p>
</li>
<li>
<p>Write 1&#x2013;2 paragraphs about why you think different metrics tell different stories. How can PPV be similar but FPR or FNR be different? Think about a confusion matrix to help you with this.</p>
</li>
</ol>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="assignment3.html" class="navigation navigation-prev " aria-label="Previous page: Assignment 3">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="assignment5.html" class="navigation navigation-next " aria-label="Next page: Assignment 5">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Assignment 4","level":"1.5.4","depth":2,"next":{"title":"Assignment 5","level":"1.5.5","depth":2,"path":"assignments/assignment5.adoc","ref":"assignments/assignment5.adoc","articles":[]},"previous":{"title":"Assignment 3","level":"1.5.3","depth":2,"path":"assignments/assignment3.adoc","ref":"assignments/assignment3.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["asciidoc-admonition-icons","mathjax","otherlink"],"pluginsConfig":{"asciidoc-admonition-icons":{},"search":{},"otherlink":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"assignments/assignment4.adoc","mtime":"2017-10-30T22:06:26.023Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2018-01-01T19:13:06.479Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

