
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Assignment 2 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-asciidoc-admonition-icons/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">

    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="assignment3.html" />
    
    
    <link rel="prev" href="assignment1.html" />
    

<link href="https://fonts.googleapis.com/css?family=Lato|Merriweather" rel="stylesheet">

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../syllabus/">
            
                <a href="../syllabus/">
            
                    
                    Syllabus
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../syllabus/outcomes.html">
            
                <a href="../syllabus/outcomes.html">
            
                    
                    Goals and Outcomes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../syllabus/logistics.html">
            
                <a href="../syllabus/logistics.html">
            
                    
                    Course Logistics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../syllabus/resources.html">
            
                <a href="../syllabus/resources.html">
            
                    
                    Textbook and Resources
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../syllabus/assessment.html">
            
                <a href="../syllabus/assessment.html">
            
                    
                    Assessment Plan
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../syllabus/policies.html">
            
                <a href="../syllabus/policies.html">
            
                    
                    Course Policies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../syllabus/schedule.html">
            
                <a href="../syllabus/schedule.html">
            
                    
                    Schedule
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../resources/">
            
                <a href="../resources/">
            
                    
                    Software and Resources
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../resources/documentation.html">
            
                <a href="../resources/documentation.html">
            
                    
                    Documentation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../resources/software.html">
            
                <a href="../resources/software.html">
            
                    
                    Software and Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../resources/onyx.html">
            
                <a href="../resources/onyx.html">
            
                    
                    Using Onyx
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../resources/git.html">
            
                <a href="../resources/git.html">
            
                    
                    Git for Data Science
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../resources/good-notebooks.html">
            
                <a href="../resources/good-notebooks.html">
            
                    
                    Writing Good Notebooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../classes/">
            
                <a href="../classes/">
            
                    
                    Class Information
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../classes/week1.html">
            
                <a href="../classes/week1.html">
            
                    
                    Week 1 (Aug. 21–25)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../classes/week2.html">
            
                <a href="../classes/week2.html">
            
                    
                    Week 2 (Aug. 28–Sep. 1)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../classes/week3.html">
            
                <a href="../classes/week3.html">
            
                    
                    Week 3 (Sep. 4–8)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../classes/week4.html">
            
                <a href="../classes/week4.html">
            
                    
                    Week 4 (Sep. 11-15)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../classes/week5.html">
            
                <a href="../classes/week5.html">
            
                    
                    Week 5 (Sep. 18–22)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../classes/week6.html">
            
                <a href="../classes/week6.html">
            
                    
                    Week 6 (Sep. 25–29)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../classes/week7.html">
            
                <a href="../classes/week7.html">
            
                    
                    Week 7 (Oct. 2–6)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../classes/week9.html">
            
                <a href="../classes/week9.html">
            
                    
                    Week 9 (Oct. 16–20)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../classes/week11.html">
            
                <a href="../classes/week11.html">
            
                    
                    Week 11 (Oct. 30–Nov. 3)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../classes/week12.html">
            
                <a href="../classes/week12.html">
            
                    
                    Week 12 (Nov. 6–10)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Assignments
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="assignment1.html">
            
                <a href="assignment1.html">
            
                    
                    Assignment 1
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.2" data-path="assignment2.html">
            
                <a href="assignment2.html">
            
                    
                    Assignment 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="assignment3.html">
            
                <a href="assignment3.html">
            
                    
                    Assignment 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="assignment4.html">
            
                <a href="assignment4.html">
            
                    
                    Assignment 4
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="assignment5.html">
            
                <a href="assignment5.html">
            
                    
                    Assignment 5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="assignment67.html">
            
                <a href="assignment67.html">
            
                    
                    Assignments 6&7
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../notebooks/README.md">
            
                <span>
            
                    
                    Notebooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <a target="_blank" href="ref://notebooks/DiscreteProbIntro.html">
            
                    
                    Discrete Probability Intro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" >
            
                <a target="_blank" href="ref://notebooks/ContinuousProbIntro.html">
            
                    
                    Continuous Probability Intro
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../failure.html">
            
                <a href="../failure.html">
            
                    
                    On Failure
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Assignment 2</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="assignment-2">Assignment 2</h1>
<div class="sect1">
<h2 id="_goals">Goals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This assignment will exercise the following skills:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creating and managing projects with <code>git</code></p>
</li>
<li>
<p>Loading data from files</p>
</li>
<li>
<p>Aggregating data with <code>dplyr</code></p>
</li>
<li>
<p>Detecting product associations</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="fa icon-important" title="Important">&#xF06A;</div>
</td>
<td class="content">
As of Sep. 8, this assignment description will get you started. I may add a few questions, but will do so no later than Sep. 15.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_set">Data Set</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this project, you will use the <a href="https://grouplens.org/datasets/hetrec-2011/" target="_blank">Last.FM data from HetRec 2011</a>.  This data set consists of several tab-separated value files, each of which has a different set of records:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>artists.dat</code></dt>
<dd>
<p>Information about music artists.</p>
</dd>
<dt class="hdlist1"><code>tags.dat</code></dt>
<dd>
<p>Information about tags (mapping from tag IDs to tags).</p>
</dd>
<dt class="hdlist1"><code>user_artists.dat</code></dt>
<dd>
<p>The number of times each user has listened to each artist.</p>
</dd>
<dt class="hdlist1"><code>user_taggedartists.dat</code></dt>
<dd>
<p>Tags users have applied to artists; this file uses IDs, so you will need to join with the other files to make it readable.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can read each of these files with the <a href="http://readr.tidyverse.org/reference/read_delim.html" target="_blank"><code>read_tsv()</code></a> function from <code>readr</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new Git repository, both locally and on BitBucket (your BitBucket repository should be private), to store your work.</p>
</div>
<div class="paragraph">
<p>Unpack the files into the <code>data</code> directory, and add them with <code>git lfs</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>git lfs track &apos;*.dat&apos;
git add data</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="fa icon-note" title="Note">&#xF05A;</div>
</td>
<td class="content">
For this project, you will <strong>share your Git repository with me</strong> to submit it, and I need to be able to re-run your notebook.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a Jupyter notebook to contain your data analysis.</p>
</div>
<div class="paragraph">
<p><strong>Do not</strong> commit the HTML export of your notebook.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_necessary_functions">Necessary Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For this assignment, you&#x2019;ll need quite a few <code>dplyr</code> functions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>inner_join</code> to merge tables</p>
</li>
<li>
<p><code>group_by</code> and <code>summarize</code> to aggregate data</p>
</li>
<li>
<p><code>arrange</code> to sort data</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And probably some more!  We&#x2019;ll be working some examples in class to help with this.</p>
</div>
<div class="paragraph">
<p>For example, to count the number of users playing each artist and the number of times the artist has been played, you can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-r" data-lang="r">artists = read_tsv(<span class="hljs-string">&apos;artists.dat&apos;</span>)
plays = read_tsv(<span class="hljs-string">&apos;user_artists.dat&apos;</span>)
plays %&gt;%
    group_by(artistID) %&gt;%
    summarize(userCount=n(),
              totalPlays=sum(weight)) %&gt;%
    inner_join(select(artists, artistID=id, name=name))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Think about what this code does a bit &#x2014; I think you will find it instructive in how to put together <code>dplyr</code> pipelines.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exploring_the_data">Exploring the Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Answer the following questions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Plot the distribution of <strong>play counts</strong> per artist</p>
</li>
<li>
<p>Plot the distribution of <strong>unique users</strong> playing each artist</p>
</li>
<li>
<p>Plot the distribution of <strong>play counts</strong> per user</p>
</li>
<li>
<p>Plot the distribution of <strong>unique artists</strong> per user</p>
</li>
<li>
<p>What is the mean artists-per-user? Users-per-artist? Plays per user/artist pair?</p>
</li>
<li>
<p>What are the 10 artists with the most plays?</p>
</li>
<li>
<p>What are the 10 artists with the most unique playing users?</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_association_rules">Association Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One common problem in sales and media is identifying <em>related products</em>: if a user likes Nickelback, what other artists might we be able to recommend?</p>
</div>
<div class="paragraph">
<p>One way to do this is through <em>association rules</em>: look at other artists listened to by users who like Nickelback.  We can think of a very simple association rule as a conditional probability.  If we denote by \(A_u\) the set of artists played by user \(u\), we can compute the association between artists \(a\) and \(b\) by:</p>
</div>
<div class="stemblock">
<div class="content">
\[P(b \in A_u | a \in A_u)\]
</div>
</div>
<div class="paragraph">
<p>You will probably find it useful to make use of the identity \(P(X|Y) = P(X,Y)/P(Y)\).  We can estimate \(P(X,Y)\) from <em>co-plays</em>, the number of users who have listened to both artists in a pair.</p>
</div>
<div class="paragraph">
<p>QUESTION: What is the most commonly-played pair of artists?</p>
</div>
<div class="paragraph">
<p>Estimating the joint probabilities can be tricky. A naive solution to compute the joint probabilities between all pairs of items is \(O(n^2)\) probability computations.</p>
</div>
<div class="paragraph">
<p>We can take advantage of the fact that two artists that never appear together have a co-play count of 0, and that the <code>artists.dat</code> table links artists to plays.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-r" data-lang="r">coplays = plays %&gt;%
    select(a1=artistID, userID) %&gt;%
    inner_join(select(plays, a2=artistID, userID)) %&gt;%
    filter(a1 != a2) %&gt;%
    group_by(a1, a2) %&gt;%
    summarize(count = n())</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have our coplay counts, you can answer the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What pair of artists has been co-played the most often?</p>
</li>
<li>
<p>How many users have listened to both Nickelback and Britney Spears?</p>
</li>
<li>
<p>What is the probability that a randomly-selected user has listened to both Nickelback and Britney Spears?</p>
</li>
<li>
<p>Given that a user has listened to Nickelback, what is the probability that they have also listened to Britney Spears?</p>
</li>
<li>
<p>Given that a user has listened to Aretha Franklin, what 10 artists are they most likely to have listened to?</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_extending_association_rules">Extending Association Rules</h3>
<div class="paragraph">
<p>Naive association rules have the problem that they tend to favor popular items.  For a popular artist such as Katy Perry, many people listen to her no matter what else they listen to; \(P(\textrm{katy perry}|X)\) is high no matter what \(X\) is.  (Except that Katy Perry isn&#x2019;t in our data set because it&#x2019;s old.)</p>
</div>
<div class="paragraph">
<p>What we can do instead is measure <em>lift</em>, which measures how positively coupled two items are by measuring how much more likely the user is to listen to both of them than they would be if the two items were completely independent.</p>
</div>
<div class="stemblock">
<div class="content">
\[\textrm{lift(X,Y)} = \frac{P(X,Y)}{P(X)P(Y)}\]
</div>
</div>
<div class="paragraph">
<p>There are other formulas we can use as well, but this one will get us started.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>What 10 artists have the highest lift with respect to Aretha Franklin?</p>
</li>
<li>
<p>What is the lift of Nickelback and Britney Spears?</p>
</li>
<li>
<p>What is the lift of Britney Spears and Ozzy Ozborne?</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_submitting">Submitting</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Push your notebook &amp; data to a repository on your BitBucket account</p>
</li>
<li>
<p>Give my user (<code>mdekstrand</code>) read access to your repository</p>
</li>
<li>
<p>Send me an e-mail with a link to your repository</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The assignment is due on <strong>Monday, Sep. 25</strong> by midnight.</p>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="assignment1.html" class="navigation navigation-prev " aria-label="Previous page: Assignment 1">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="assignment3.html" class="navigation navigation-next " aria-label="Next page: Assignment 3">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Assignment 2","level":"1.5.2","depth":2,"next":{"title":"Assignment 3","level":"1.5.3","depth":2,"path":"assignments/assignment3.adoc","ref":"assignments/assignment3.adoc","articles":[]},"previous":{"title":"Assignment 1","level":"1.5.1","depth":2,"path":"assignments/assignment1.adoc","ref":"assignments/assignment1.adoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["asciidoc-admonition-icons","mathjax","otherlink"],"pluginsConfig":{"asciidoc-admonition-icons":{},"search":{},"otherlink":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mathjax":{"forceSVG":false,"version":"2.6-latest"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"assignments/assignment2.adoc","mtime":"2017-09-30T01:20:31.085Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2018-01-01T19:13:06.479Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

