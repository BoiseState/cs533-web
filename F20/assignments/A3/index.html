
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://cs533.ekstrandom.net/F20/assignments/A3/">
      
      <link rel="icon" href="../../logo.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Assignment 3 - Intro to Data Science</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
<link href="../../stylesheets/print.css" rel="stylesheet" media="print">

    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Lato";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    
      


    
    

    <meta name="robots" content="noindex,noarchive">



  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#revision-log" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Intro to Data Science" class="md-header__button md-logo" aria-label="Intro to Data Science" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intro to Data Science
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Assignment 3
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Course Info
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../syllabus/" class="md-tabs__link">
      Syllabus
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../schedule/" class="md-tabs__link">
      Schedule
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../resources/" class="md-tabs__link">
        Resources
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../content/" class="md-tabs__link">
        Content
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Assignments
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Intro to Data Science" class="md-nav__button md-logo" aria-label="Intro to Data Science" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"/></svg>

    </a>
    Intro to Data Science
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Course Info
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../syllabus/" class="md-nav__link">
        Syllabus
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../schedule/" class="md-nav__link">
        Schedule
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Resources
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/software/" class="md-nav__link">
        Software Installation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/onyx/" class="md-nav__link">
        Remotely Using Onyx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/notebook-checklist/" class="md-nav__link">
        Notebook Checklist
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/problems/" class="md-nav__link">
        Common Problems
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/probability/" class="md-nav__link">
        Notes on Probability
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/git-resources/" class="md-nav__link">
        Git Resources
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/tutorials/" class="md-nav__link">
        Tutorial Notebooks
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Content
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Content" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Content
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/" class="md-nav__link">
        Course Content
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week1/" class="md-nav__link">
        Week 1 — Question
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week2/" class="md-nav__link">
        Week 2 — Description
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week3/" class="md-nav__link">
        Week 3 — Presentation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week4/" class="md-nav__link">
        Week 4 — Inference
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week5/" class="md-nav__link">
        Week 5 — Filling In
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week6/" class="md-nav__link">
        Week 6 — Two Variables
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week7/" class="md-nav__link">
        Week 7 — Getting Data
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week8/" class="md-nav__link">
        Week 8 — Regression
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week9/" class="md-nav__link">
        Week 9 — Models & Prediction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week10/" class="md-nav__link">
        Week 10 — Classification
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week11/" class="md-nav__link">
        Week 11 — Evaluation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week12/" class="md-nav__link">
        Week 12 — Text
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week13/" class="md-nav__link">
        Week 13 — Unsupervised
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week14/" class="md-nav__link">
        Week 14 — Workflow
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../content/week15/" class="md-nav__link">
        Week 15 — What Next?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Assignments
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Assignments" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Assignments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Index
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_2" type="checkbox" id="__nav_6_2" >
      
      <label class="md-nav__link" for="__nav_6_2">
        Assignment 0
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Assignment 0" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          Assignment 0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A0/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A0/A0-Notebook/" class="md-nav__link">
        CS 533 Assignment 0
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A0/A0-Solution.pdf" class="md-nav__link">
        PDF
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A1/" class="md-nav__link">
        Assignment 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A2/" class="md-nav__link">
        Assignment 2
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Assignment 3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Assignment 3
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#revision-log" class="md-nav__link">
    Revision Log
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-estimates" class="md-nav__link">
    Time Estimates
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A4/" class="md-nav__link">
        Assignment 4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A5/" class="md-nav__link">
        Assignment 5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A6/" class="md-nav__link">
        Assignment 6
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../A7/" class="md-nav__link">
        Assignment 7
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#revision-log" class="md-nav__link">
    Revision Log
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-estimates" class="md-nav__link">
    Time Estimates
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              



                
                
                <h1 id="assignment-3">Assignment 3</h1>
<p>The purpose of Assignment 3 is to give you experience integrating data from multiple sources to look at a two-variable question.</p>
<p>It is due <strong>October 11, 2020</strong> at the end of the day (11:59 PM). Submit your <code>.ipynb</code> and PDF files to Blackboard.</p>
<div class="admonition note">
<p class="admonition-title">Assignment Requirements Structure</p>
<p>This assignment is not structured step-by-step like the first two.  I describe the data, and the questions you need to answer,
and you need to build a well-structured notebook that answers them.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Read</p>
<p>Read the entire assignment before you begin!</p>
</div>
<h2 id="revision-log">Revision Log</h2>
<dl>
<dt>October 10, 2020</dt>
<dd>Slight clarification to the wording of requirements 2 and 3.</dd>
<dt>September 29, 2020</dt>
<dd>Added a description of the Social Explorer's useful census data descriptions.</dd>
</dl>
<h2 id="concept">Concept</h2>
<div class="admonition question">
<p class="admonition-title">Central Question</p>
<p>Are health outcomes correlated with poverty levels in a community?</p>
</div>
<p>That is the central question of this assignment.  To answer this, we are going to obtain poverty data from the U.S. Census Bureau and health data from the Global Health Data Exchange and the US Centers for Disease Control, and look at the relationship between a state's poverty rate and various health outcomes.</p>
<p>We are going to operationalize these as follows:</p>
<ul>
<li>Poverty rate: fraction of family households underneath the poverty line in 2014</li>
<li>Health outcomes:<ul>
<li>Mortality rates from infectious diseases in 2014</li>
<li>Infant mortality rate in 2014</li>
</ul>
</li>
<li>Unit of analysis: state (we will discuss implications of this!)</li>
</ul>
<p>For more background, read <a href="https://www.healthypeople.gov/2020/topics-objectives/topic/social-determinants-of-health">Healthy People 2020's description of social determinants of health</a>.</p>
<h2 id="data">Data</h2>
<p>We're going to get data from 3 sources.</p>
<h3 id="income-us-census">Income — US Census</h3>
<p>We are going to get <em>income</em> data from the US Census Bureau.  The in-class exercise on September 29 will give you practice with census data.</p>
<h4 id="setting-up">Setting Up</h4>
<p>Before using census data, you need to get an API key. <a href="https://api.census.gov/data/key_signup.html">Request one here</a>.</p>
<p>You will also need to install the Python package for the Census API, and a package of US state code data.  These are not available in Conda, so use Pip:</p>
<pre><code>pip install census us
</code></pre>
<h4 id="data-layout">Data Layout</h4>
<p>The census data comes in a variety of <em>files</em>. These files include:</p>
<ul>
<li><code>sf1</code> — Summary File 1, containing complete count information on the <em>decennial</em> census.</li>
<li><code>acs5</code> — American Community Survey, a supplementary annual survey of a sample of the population carried out by the census bureau, 5-year estimates.</li>
</ul>
<p>We are going to be using ACS5.  It has thousands of variables.  The <a href="https://api.census.gov/data/2014/acs/acs5/variables.html">variable list</a> describes them, and the ones of interest are all reported as <strong>estimated population counts</strong>.  That means variable <code>B06009_003E</code> is an estimate, based on the sample, of the number of people in a geographic region whose highest educational attainment is a high school degree.</p>
<p>The <code>B05010_*</code> variables describe population with respect to the poverty line.  <code>B05010_001E</code> is the estimated total number of family households, and <code>B05010_002E</code> is the estimated number under the poverty line.  These variables are described in more detail in the <a href="https://www.socialexplorer.com/data/ACS2014_5yr/metadata/?ds=ACS14_5yr&amp;table=B05010">Social Data Explorer</a>.</p>
<p>You can use these two variables to caculate the <em>poverty level</em> as defined above: the fraction of households under the poverty line.</p>
<div class="admonition hint">
<p class="admonition-title">Fetching Census Data</p>
<p>If you have a <code>Census</code> object defined in variable <code>c</code>, as we did in the Sep. 29 example, you can fetch these variables for all states with:</p>
<div class="highlight"><pre><span></span><code><span class="n">state_pop</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_records</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">acs5</span><span class="o">.</span><span class="n">state</span><span class="p">((</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="s1">&#39;B05010_001E&#39;</span><span class="p">,</span> <span class="s1">&#39;B05010_002E&#39;</span><span class="p">),</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2014</span><span class="p">))</span>
</code></pre></div>
</div>
<p>The <code>state</code> column in the resulting table is the state's FIPS code, as a string.</p>
<div class="admonition hint">
<p class="admonition-title">Social Explorer</p>
<p>The Social Explorer has a very good <a href="https://www.socialexplorer.com/data/ACS2014_5yr/metadata/?ds=ACS14_5yr">database of census fields</a>.
This database describes all the census sub-tables, and lets you browse them by group (e.g. B05010).</p>
<p>Within the page for a group, such as <a href="https://www.socialexplorer.com/data/ACS2014_5yr/metadata/?ds=ACS14_5yr&amp;table=B05010">B05010</a>, there
is a list of all the sub-variables, organized hierarchically so you can see how they relate to each other.
The variable names do need a bit of modification; when Social Explorer says <code>B05010001</code>, you need to request that from the census as <code>B05010_001E</code> (the Estimated value).</p>
<p>The explorer also includes excerpts from the full census technical documentation providing more detail about the different variables and their codings.</p>
</div>
<h3 id="infectious-deseases-ghdx">Infectious Deseases — GHDx</h3>
<p>We will obtain infectious disease mortality rates from the <a href="http://ghdx.healthdata.org/record/ihme-data/united-states-infectious-disease-mortality-rates-county-1980-2014">Global Health Data Exchange</a>.
These files contain county- and state-level mortality data from the U.S. from 1980 to 2014.
The files themselves are on the “Files” tab; download “National: All States and Counties (5-year Intervals)”.</p>
<p>Pandas provides a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html"><code>read_excel</code></a> function to read data tables from Excel files.
This file has 6 sheets, one for each of 6 different disease families.</p>
<div class="admonition hint">
<p class="admonition-title">Reading GHDx Data</p>
<p>You can read these data files with:</p>
<div class="highlight"><pre><span></span><code><span class="n">sheets</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;IHME_USA_COUNTY_INFECT_DIS_MORT_1980_2014_NATIONAL_Y2018M03D27.XLSX&#39;</span><span class="p">,</span>
                       <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">skipfooter</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>The resulting <code>sheets</code> variable is a <em>dictionary</em> (remember those?) mapping sheet names (disease families) to data frames.
The <code>sheet_name=None</code> option tells it to load all sheets, and <code>header=1</code> says to skip the first row and read the column headers from the second.
<code>skipfooter=2</code> tells it to skip the last two rows as well.  Look at the files to see why!</p>
</div>
<p>This data frame has annoying column names, and also annoying fields: the field values include confidence intervals. </p>
<div class="admonition hint">
<p class="admonition-title">Extracting Column Data</p>
<p>The Pandas <code>str.replace</code>, combined with a type conversion, lets us extract the actual estimate from the cell that includes the confidence intervals.
We can do this by replacing the parenthsized intervals with nothing.  Like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mortality&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mortality Rate, 2014*&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s*\(.+\)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;f8&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
<p>This mortality data is recorded as “deaths per 100,000 people”.  The rates are <em>age-standardized</em>: look up age-standardized mortality rates to read about what this means.</p>
<h3 id="infant-mortality-cdc">Infant Mortality — CDC</h3>
<p>The Centers for Disease Control and Prevention provide a table of <a href="https://www.cdc.gov/nchs/pressroom/sosmap/infant_mortality_rates/infant_mortality.htm">infant mortality data by state</a>.
Click “Download Data (CSV)” at the bottom to download the file.</p>
<p>This file has multiple years; you will need to select the rows with the year you want.</p>
<h3 id="fips-codes">FIPS Codes</h3>
<p>A <a href="https://en.wikipedia.org/wiki/FIPS_county_code">FIPS code</a> is a numeric code that identifies a U.S. state or county.
State codes are two digits; you can therefore extract the state-level data from an Infectious Disease table by selecting all rows where the FIPS column is less than 100 (the national-level <code>NaN</code> will also be excluded by such a filter).</p>
<p>Both the census and the infectious disease table use FIPS codes, so you can join (subsets of) the two tables by their FIPS code.
The census will return FIPS data as a string, so you will need to convert it to a number (<code>.astype('i4')</code>) before joining.
It is fine to join an integer column with a floating-point column.</p>
<p>The infant mortality data does <em>not</em> use FIPS codes — it uses state abbreviations.
To link FIPS codes to state abbreviations, you can use the <code>us</code> Python package (and create a data table with the appropriate linking identifiers), or download the “National FIPS and GNIS Codes File” from the <a href="https://www.census.gov/library/reference/code-lists/ansi/ansi-codes-for-states.html">US Census Bureau</a>.
It is separated by vertical bars (<code>|</code>), so you can read it with:</p>
<pre><code>pd.read_table('state.txt', sep='|')
</code></pre>
<p>You may need to convert the data type of the FIPS code column.  Once you have this file, you can merge infant mortality with census data by:</p>
<ol>
<li>Merge infant mortality with the state codes file by state abbreviation to get FIPS codes.</li>
<li>Merge the resulting table with census data by FIPS code.</li>
</ol>
<h2 id="requirements">Requirements</h2>
<p>Submit a notebook using the data above to do the following (all for 2014):</p>
<ol>
<li>Describe, both numerically and graphically, the distribution of state poverty rates.</li>
<li>Show the relationship of mortality rates of Meningitis, Hepetitis and Diarrheal Diseases to poverty rates using appropriate plots.</li>
<li>Quantify the relationship between poverty and each of the 3 mortality rates in (2) by computing correlation coefficients with bootstrapped confidence intervals for each disease.</li>
<li>Repeat (2) and (3) for infant mortality.</li>
<li>Write 2–3 paragraphs about what you learn from these data.  Discuss also limitations that you see in the data and analysis!</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Correlation and Causation</p>
<p>All this analysis can look at is whether the states with higher poverty rates also tend to have better or worse health outcomes.
We can draw no conclusions about <em>causality</em> between these variables.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Correlation Bootstrap</p>
<p>The <a href="../../resources/tutorials/Correlation/">Correlation Notebook</a> shows how to bootstrap a confidence interval for a correlation.</p>
</div>
<h2 id="time-estimates">Time Estimates</h2>
<p>I'm going to try something new this time, and please let me know if it's helpful or not.
I'm going to provide a little info on how long I expect each piece might take, given what we've done in the class so far.
These numbers are aimed to target about the 80th %ile of how long it would take the students in this class, but I admit it's just my best guess.
My hope is that it helps you calibrate your work and expectations.
I would love feedback on this!  Should I keep doing it?</p>
<ul>
<li>Fetching census data &amp; describing poverty rates: 1.5 hours (we've done a lot of data descriptions by now)</li>
<li>Reading GHDx data and linking it to census data: 1 hour</li>
<li>Showing infectious disease and mortality: 1 hour</li>
<li>Computing correlations and bootstrapped CIs for infectious diseases: 2 hours</li>
<li>Reading and linking infant mortality data: 1.5 hours</li>
<li>Presenting infant mortality correlations: 1 hour (you should be able to reuse ideas &amp; code from the infectious diseases)</li>
<li>Cleaning up, presenting, and writing your conclusions: 2 hours</li>
</ul>
                
              

              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../A2/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Assignment 2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Assignment 2
            </div>
          </div>
        </a>
      
      
        
        <a href="../A4/" class="md-footer__link md-footer__link--next" aria-label="Next: Assignment 4" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Assignment 4
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright ⓒ 2020 Michael D. Ekstrand. All rights reserved.
No part of this site may be copied or redistributed without the
written consent of the author.

          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": {"provider": "mike"}}</script>
    
<!-- <script src="../../js/katex.mjs" type="module" async></script> -->
<script src="../../js/frobnicate.js" async></script>
<script data-goatcounter="https://cs533.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

    
      <script src="../../assets/javascripts/bundle.76f349be.min.js"></script>
      
        <script src="../../js/math-config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>